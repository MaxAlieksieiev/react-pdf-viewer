"use strict";var e=require("react/jsx-runtime"),n=require("@react-pdf-viewer/core");function t(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var r=t(require("react")),l=function(){return e.jsxs(n.Icon,{size:16,children:[e.jsx("path",{d:"M11.5 23.499L11.5 14.499"}),e.jsx("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),e.jsx("path",{d:"M11.5 1.499L11.5 10.499"}),e.jsx("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),e.jsx("path",{d:"M20.5 12.499L1.5 12.499"})]})},c=function(){return e.jsxs(n.Icon,{size:16,children:[e.jsx("path",{d:"M0.5 12L23.5 12"}),e.jsx("path",{d:"M11.5 1L11.5 23"}),e.jsx("path",{d:"M8.5 4L11.5 1 14.5 4"}),e.jsx("path",{d:"M20.5 9L23.5 12 20.5 15"}),e.jsx("path",{d:"M3.5 15L0.5 12 3.5 9"}),e.jsx("path",{d:"M14.5 20L11.5 23 8.5 20"})]})},o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var u={left:0,top:8},i=function(t){var l=t.enableShortcuts,o=t.onClick,i=r.useContext(n.LocalizationContext).l10n,s=i&&i.fullScreen?i.fullScreen.enterFullScreen:"Full screen",a=l?n.isMac()?"Meta+Ctrl+F":"F11":"";console.log("isFullScreenEnabled",n.isFullScreenEnabled());return e.jsx(n.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:n.Position.BottomCenter,target:e.jsx(n.MinimalButton,{ariaKeyShortcuts:a,ariaLabel:s,isDisabled:!n.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:function(){console.log(o),o()},children:e.jsx(c,{})}),content:function(){return s},offset:u})},s={left:0,top:8},a=function(t){var c=t.onClick,o=r.useContext(n.LocalizationContext).l10n,u=o&&o.fullScreen?o.fullScreen.exitFullScreen:"Exit full screen";return e.jsx(n.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:n.Position.BottomCenter,target:e.jsx(n.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:u,testId:"full-screen__exit-button-with-tooltip",onClick:c,children:e.jsx(l,{})}),content:function(){return u},offset:s})},f=function(e,t){var l=r.useState(t.get("fullScreenMode")),c=l[0],o=l[1],u=r.useCallback((function(e){o(e)}),[]);return r.useEffect((function(){return t.subscribe("fullScreenMode",u),function(){t.unsubscribe("fullScreenMode",u)}}),[]),{enterFullScreen:function(){var n=t.get("getPagesContainer");if(n){var r=e(n());t.get("enterFullScreenMode")(r)}},exitFullScreen:function(){t.get("exitFullScreenMode")()},isFullScreen:c===n.FullScreenMode.Entering||c===n.FullScreenMode.EnteredCompletely}},S=function(n){var t=n.children,r=n.enableShortcuts,l=n.getFullScreenTarget,c=n.store,o=f(l,c),u=o.enterFullScreen,s=o.exitFullScreen,S=o.isFullScreen;return(t||function(n){return S?e.jsx(a,{onClick:n.onClick}):e.jsx(i,{enableShortcuts:r,onClick:n.onClick})})({onClick:S?s:u})},d=function(t){var l=t.onClick,o=r.useContext(n.LocalizationContext).l10n,u=o&&o.fullScreen?o.fullScreen.enterFullScreen:"Full screen";return e.jsx(n.MenuItem,{icon:e.jsx(c,{}),isDisabled:!n.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:l,children:u})},x=function(t){var c=t.onClick,o=r.useContext(n.LocalizationContext).l10n,u=r.useContext(n.ThemeContext).direction===n.TextDirection.RightToLeft,i=o&&o.fullScreen?o.fullScreen.exitFullScreen:"Exit full screen";return e.jsx("div",{className:n.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!u,"rpv-full-screen__exit-button--rtl":u}),children:e.jsx(n.MinimalButton,{ariaLabel:i,testId:"full-screen__exit-button",onClick:c,children:e.jsx(l,{})})})},F=function(n){var t=n.children,r=n.getFullScreenTarget,l=n.store,c=f(r,l),o=c.enterFullScreen,u=c.exitFullScreen,i=c.isFullScreen;return i&&(t||function(n){return e.jsx(x,{onClick:n.onClick})})({onClick:i?u:o})},h=function(t){var l=t.store,c=t.onEnterFullScreen,o=t.onExitFullScreen,u=r.useState(l.get("fullScreenMode")),i=u[0],s=u[1],a=r.useCallback((function(e){console.log("handleFullScreenMode",e),s(e)}),[]);return r.useEffect((function(){switch(i){case n.FullScreenMode.EnteredCompletely:c(l.get("zoom"));break;case n.FullScreenMode.Exited:o(l.get("zoom"))}}),[i]),r.useEffect((function(){return l.subscribe("fullScreenMode",a),function(){l.unsubscribe("fullScreenMode",a)}}),[]),(i===n.FullScreenMode.Entering||i===n.FullScreenMode.Entered)&&e.jsx("div",{className:"rpv-full-screen__overlay",children:e.jsx(n.Spinner,{})})},j=function(t){var l=t.containerRef,c=t.getFullScreenTarget,o=t.store,u=f(c,o).enterFullScreen,i=function(e){if(!e.shiftKey&&!e.altKey&&(n.isMac()?e.metaKey&&e.ctrlKey&&"f"===e.key:"F11"===e.key)){var t=l.current;t&&document.activeElement&&t.contains(document.activeElement)&&(e.preventDefault(),u())}};return r.useEffect((function(){if(l.current)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[l.current]),e.jsx(e.Fragment,{})};exports.ExitFullScreenIcon=l,exports.FullScreenIcon=c,exports.fullScreenPlugin=function(t){var l=(null==t?void 0:t.getFullScreenTarget)||function(e){return e},c=r.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},t)}),[]),u=r.useMemo((function(){return n.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:n.FullScreenMode.Normal,zoom:function(){}})}),[]),s=function(n){return e.jsx(S,o({},n,{enableShortcuts:c.enableShortcuts,getFullScreenTarget:l,store:u}))},a=function(){return e.jsx(F,{getFullScreenTarget:l,store:u,children:null==t?void 0:t.renderExitFullScreenButton})};return{install:function(e){u.update("enterFullScreenMode",e.enterFullScreenMode),u.update("exitFullScreenMode",e.exitFullScreenMode),u.update("getPagesContainer",e.getPagesContainer),u.update("zoom",e.zoom)},onViewerStateChange:function(e){return u.update("fullScreenMode",e.fullScreenMode),e},renderViewer:function(n){var t=n.slot;return t.subSlot&&(t.subSlot.children=e.jsxs(e.Fragment,{children:[c.enableShortcuts&&e.jsx(j,{containerRef:n.containerRef,getFullScreenTarget:l,store:u}),e.jsx(h,{store:u,onEnterFullScreen:c.onEnterFullScreen,onExitFullScreen:c.onExitFullScreen}),e.jsx(a,{}),t.subSlot.children]})),t},EnterFullScreen:s,EnterFullScreenButton:function(){return e.jsx(s,{children:function(n){return e.jsx(i,o({enableShortcuts:c.enableShortcuts},n))}})},EnterFullScreenMenuItem:function(n){return e.jsx(s,{children:function(t){return e.jsx(d,{onClick:function(){t.onClick(),n.onClick()}})}})}}};
