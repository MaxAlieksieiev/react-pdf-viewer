"use strict";var e=require("react/jsx-runtime"),n=require("@max_alieksieiev/react-pdf-viewer-core");function t(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var r=t(require("react")),l=function(){return e.jsxs(n.Icon,{size:16,children:[e.jsx("path",{d:"M11.5 23.499L11.5 14.499"}),e.jsx("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),e.jsx("path",{d:"M11.5 1.499L11.5 10.499"}),e.jsx("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),e.jsx("path",{d:"M20.5 12.499L1.5 12.499"})]})},u=function(){return e.jsxs(n.Icon,{size:16,children:[e.jsx("path",{d:"M0.5 12L23.5 12"}),e.jsx("path",{d:"M11.5 1L11.5 23"}),e.jsx("path",{d:"M8.5 4L11.5 1 14.5 4"}),e.jsx("path",{d:"M20.5 9L23.5 12 20.5 15"}),e.jsx("path",{d:"M3.5 15L0.5 12 3.5 9"}),e.jsx("path",{d:"M14.5 20L11.5 23 8.5 20"})]})},c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},c.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var o={left:0,top:8},i=function(t){var l=t.enableShortcuts,c=t.onClick,i=r.useContext(n.LocalizationContext).l10n,s=i&&i.fullScreen?i.fullScreen.enterFullScreen:"Full screen",a=l?n.isMac()?"Meta+Ctrl+F":"F11":"";return e.jsx(n.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:n.Position.BottomCenter,target:e.jsx(n.MinimalButton,{ariaKeyShortcuts:a,ariaLabel:s,isDisabled:!n.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:c,children:e.jsx(u,{})}),content:function(){return s},offset:o})},s={left:0,top:8},a=function(t){var u=t.onClick,c=r.useContext(n.LocalizationContext).l10n,o=c&&c.fullScreen?c.fullScreen.exitFullScreen:"Exit full screen";return e.jsx(n.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:n.Position.BottomCenter,target:e.jsx(n.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:o,testId:"full-screen__exit-button-with-tooltip",onClick:u,children:e.jsx(l,{})}),content:function(){return o},offset:s})},f=function(e,t){var l=r.useState(t.get("fullScreenMode")),u=l[0],c=l[1],o=r.useCallback((function(e){c(e)}),[]);return r.useEffect((function(){return t.subscribe("fullScreenMode",o),function(){t.unsubscribe("fullScreenMode",o)}}),[]),{enterFullScreen:function(){var n=t.get("getPagesContainer");if(n){var r=e(n());t.get("enterFullScreenMode")(r)}},exitFullScreen:function(){t.get("exitFullScreenMode")()},isFullScreen:u===n.FullScreenMode.Entering||u===n.FullScreenMode.EnteredCompletely}},S=function(n){var t=n.children,r=n.enableShortcuts,l=n.getFullScreenTarget,u=n.store,c=f(l,u),o=c.enterFullScreen,s=c.exitFullScreen,S=c.isFullScreen;return(t||function(n){return S?e.jsx(a,{onClick:n.onClick}):e.jsx(i,{enableShortcuts:r,onClick:n.onClick})})({onClick:S?s:o})},d=function(t){var l=t.onClick,c=r.useContext(n.LocalizationContext).l10n,o=c&&c.fullScreen?c.fullScreen.enterFullScreen:"Full screen";return e.jsx(n.MenuItem,{icon:e.jsx(u,{}),isDisabled:!n.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:l,children:o})},x=function(t){var u=t.onClick,c=r.useContext(n.LocalizationContext).l10n,o=r.useContext(n.ThemeContext).direction===n.TextDirection.RightToLeft,i=c&&c.fullScreen?c.fullScreen.exitFullScreen:"Exit full screen";return e.jsx("div",{className:n.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!o,"rpv-full-screen__exit-button--rtl":o}),children:e.jsx(n.MinimalButton,{ariaLabel:i,testId:"full-screen__exit-button",onClick:u,children:e.jsx(l,{})})})},F=function(n){var t=n.children,r=n.getFullScreenTarget,l=n.store,u=f(r,l),c=u.enterFullScreen,o=u.exitFullScreen,i=u.isFullScreen;return i&&(t||function(n){return e.jsx(x,{onClick:n.onClick})})({onClick:i?o:c})},j=function(t){var l=t.store,u=t.onEnterFullScreen,c=t.onExitFullScreen,o=r.useState(l.get("fullScreenMode")),i=o[0],s=o[1],a=r.useCallback((function(e){s(e)}),[]);return r.useEffect((function(){switch(i){case n.FullScreenMode.EnteredCompletely:u(l.get("zoom"));break;case n.FullScreenMode.Exited:c(l.get("zoom"))}}),[i]),r.useEffect((function(){return l.subscribe("fullScreenMode",a),function(){l.unsubscribe("fullScreenMode",a)}}),[]),(i===n.FullScreenMode.Entering||i===n.FullScreenMode.Entered)&&e.jsx("div",{className:"rpv-full-screen__overlay",children:e.jsx(n.Spinner,{})})},h=function(t){var l=t.containerRef,u=t.getFullScreenTarget,c=t.store,o=f(u,c).enterFullScreen,i=function(e){if(!e.shiftKey&&!e.altKey&&(n.isMac()?e.metaKey&&e.ctrlKey&&"f"===e.key:"F11"===e.key)){var t=l.current;t&&document.activeElement&&t.contains(document.activeElement)&&(e.preventDefault(),o())}};return r.useEffect((function(){if(l.current)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[l.current]),e.jsx(e.Fragment,{})};exports.ExitFullScreenIcon=l,exports.FullScreenIcon=u,exports.fullScreenPlugin=function(t){var l=(null==t?void 0:t.getFullScreenTarget)||function(e){return e},u=r.useMemo((function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},t)}),[]),o=r.useMemo((function(){return n.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:n.FullScreenMode.Normal,zoom:function(){}})}),[]),s=function(n){return e.jsx(S,c({},n,{enableShortcuts:u.enableShortcuts,getFullScreenTarget:l,store:o}))},a=function(){return e.jsx(F,{getFullScreenTarget:l,store:o,children:null==t?void 0:t.renderExitFullScreenButton})};return{install:function(e){o.update("enterFullScreenMode",e.enterFullScreenMode),o.update("exitFullScreenMode",e.exitFullScreenMode),o.update("getPagesContainer",e.getPagesContainer),o.update("zoom",e.zoom)},onViewerStateChange:function(e){return o.update("fullScreenMode",e.fullScreenMode),e},renderViewer:function(n){var t=n.slot;return t.subSlot&&(t.subSlot.children=e.jsxs(e.Fragment,{children:[u.enableShortcuts&&e.jsx(h,{containerRef:n.containerRef,getFullScreenTarget:l,store:o}),e.jsx(j,{store:o,onEnterFullScreen:u.onEnterFullScreen,onExitFullScreen:u.onExitFullScreen}),e.jsx(a,{}),t.subSlot.children]})),t},EnterFullScreen:s,EnterFullScreenButton:function(){return e.jsx(s,{children:function(n){return e.jsx(i,c({enableShortcuts:u.enableShortcuts},n))}})},EnterFullScreenMenuItem:function(n){return e.jsx(s,{children:function(t){return e.jsx(d,{onClick:function(){t.onClick(),n.onClick()}})}})}}};
