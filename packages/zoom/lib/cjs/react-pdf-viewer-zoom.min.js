"use strict";var e=require("react/jsx-runtime"),t=require("@react-pdf-viewer/core");function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(require("react")),r=function(){return e.jsx(t.Icon,{ignoreDirection:!0,size:16,children:e.jsx("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10\n            M10.5,5.499v10"})})},c=function(){return e.jsx(t.Icon,{ignoreDirection:!0,size:16,children:e.jsx("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n            M23.5,23.499\n            l-5.929-5.929\n            M5.5,10.499h10"})})},i=function(){return i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var u=function(e){var t=o.useState(e.get("scale")||0),n=t[0],r=t[1],c=function(e){r(e)};return o.useEffect((function(){return e.subscribe("scale",c),function(){e.unsubscribe("scale",c)}}),[]),{scale:n}},a=function(t){var n=t.children,o=t.store;return(n||function(t){return e.jsx(e.Fragment,{children:"".concat(Math.round(100*t.scale),"%")})})({scale:u(o).scale})},s={passive:!1},l=null,f=function(n){var o=n.pagesContainerRef,r=n.store,c=t.useDebounceCallback((function(e){var t=r.get("zoom");t&&t(e)}),40),i=function(e){if(e.ctrlKey){e.preventDefault();var t=e.target.getBoundingClientRect(),n=1-e.deltaY/100,o=e.clientX-t.left,i=e.clientY-t.top,u=r.get("scale"),a=(l||(l=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(o,i).scale(n).translate(-o,-i).scale(u);c(a.a)}};return t.useIsomorphicLayoutEffect((function(){var e=o.current;if(e)return e.addEventListener("wheel",i,s),function(){e.removeEventListener("wheel",i)}}),[]),e.jsx(e.Fragment,{})},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],v=function(e){return m.find((function(t){return t>e}))||e},p=function(e){var t=m.findIndex((function(t){return t>=e}));return-1===t||0===t?e:m[t-1]},d=function(n){var r=n.containerRef,c=n.store,i=function(e){if(!e.shiftKey&&!e.altKey&&(t.isMac()?e.metaKey:e.ctrlKey)){var n=r.current;if(n&&document.activeElement&&n.contains(document.activeElement)){var o=c.get("zoom");if(o){var i=c.get("scale")||1,u=1;switch(e.key){case"-":u=p(i);break;case"=":u=v(i);break;case"0":u=1;break;default:u=i}u!==i&&(e.preventDefault(),o(u))}}}};return o.useEffect((function(){if(r.current)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[r.current]),e.jsx(e.Fragment,{})},x=[.5,.75,1,1.25,1.5,2,3,4],h={left:0,top:8},z=function(n){var r=n.levels,c=void 0===r?x:r,i=n.scale,u=n.onZoom,a=o.useContext(t.LocalizationContext).l10n,s=o.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,l=function(e){switch(e){case t.SpecialZoomLevel.ActualSize:return a&&a.zoom?a.zoom.actualSize:"Actual size";case t.SpecialZoomLevel.PageFit:return a&&a.zoom?a.zoom.pageFit:"Page fit";case t.SpecialZoomLevel.PageWidth:return a&&a.zoom?a.zoom.pageWidth:"Page width"}},f=a&&a.zoom?a.zoom.zoomDocument:"Zoom document";return e.jsx(t.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:t.Position.BottomCenter,target:function(n){return e.jsx(t.MinimalButton,{ariaLabel:f,testId:"zoom__popover-target",onClick:function(){n()},children:e.jsxs("span",{className:"rpv-zoom__popover-target",children:[e.jsxs("span",{"data-testid":"zoom__popover-target-scale",className:t.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!s,"rpv-zoom__popover-target-scale--rtl":s}),children:[Math.round(100*i),"%"]}),e.jsx("span",{className:"rpv-zoom__popover-target-arrow"})]})})},content:function(n){return e.jsxs(t.Menu,{children:[Object.keys(t.SpecialZoomLevel).map((function(o){var r=o;return e.jsx(t.MenuItem,{onClick:function(){n(),u(r)},children:l(r)},r)})),e.jsx(t.MenuDivider,{}),c.map((function(o){return e.jsx(t.MenuItem,{onClick:function(){n(),u(o)},children:"".concat(Math.round(100*o),"%")},o)}))]})},offset:h,closeOnClickOutside:!0,closeOnEscape:!0})},j=function(t){var n=t.children,o=t.levels,r=t.store;return(n||function(t){return e.jsx(z,{levels:o,scale:t.scale,onZoom:t.onZoom})})({scale:u(r).scale,onZoom:function(e){var t=r.get("zoom");t&&t(e)}})},g={left:0,top:8},C=function(n){var c=n.enableShortcuts,i=n.onClick,u=o.useContext(t.LocalizationContext).l10n,a=u&&u.zoom?u.zoom.zoomIn:"Zoom in",s=c?t.isMac()?"Meta+=":"Ctrl+=":"";return e.jsx(t.Tooltip,{ariaControlsSuffix:"zoom-in",position:t.Position.BottomCenter,target:e.jsx(t.MinimalButton,{ariaKeyShortcuts:s,ariaLabel:a,testId:"zoom__in-button",onClick:i,children:e.jsx(r,{})}),content:function(){return a},offset:g})},b=function(e){var t=e.children,n=e.enableShortcuts,o=e.store,r=u(o).scale;return(t||C)({enableShortcuts:n,onClick:function(){var e=o.get("zoom");e&&e(v(r))}})},S=function(n){var c=n.onClick,i=o.useContext(t.LocalizationContext).l10n,u=i&&i.zoom?i.zoom.zoomIn:"Zoom in";return e.jsx(t.MenuItem,{icon:e.jsx(r,{}),testId:"zoom__in-menu",onClick:c,children:u})},k={left:0,top:8},M=function(n){var r=n.enableShortcuts,i=n.onClick,u=o.useContext(t.LocalizationContext).l10n,a=u&&u.zoom?u.zoom.zoomOut:"Zoom out",s=r?t.isMac()?"Meta+-":"Ctrl+-":"";return e.jsx(t.Tooltip,{ariaControlsSuffix:"zoom-out",position:t.Position.BottomCenter,target:e.jsx(t.MinimalButton,{ariaKeyShortcuts:s,ariaLabel:a,testId:"zoom__out-button",onClick:i,children:e.jsx(c,{})}),content:function(){return a},offset:k})},I=function(e){var t=e.children,n=e.enableShortcuts,o=e.store,r=u(o).scale;return(t||M)({enableShortcuts:n,onClick:function(){var e=o.get("zoom");e&&e(p(r))}})},Z=function(n){var r=n.onClick,i=o.useContext(t.LocalizationContext).l10n,u=i&&i.zoom?i.zoom.zoomOut:"Zoom out";return e.jsx(t.MenuItem,{icon:e.jsx(c,{}),testId:"zoom__out-menu",onClick:r,children:u})};exports.ZoomInIcon=r,exports.ZoomOutIcon=c,exports.zoomPlugin=function(n){var r=o.useMemo((function(){return Object.assign({},{enableShortcuts:!0},n)}),[]),c=o.useMemo((function(){return t.createStore({})}),[]),u=function(t){return e.jsx(b,i({enableShortcuts:r.enableShortcuts},t,{store:c}))},s=function(t){return e.jsx(I,i({enableShortcuts:r.enableShortcuts},t,{store:c}))},l=function(t){return e.jsx(j,i({},t,{store:c}))};return{renderViewer:function(t){var n=t.slot;if(!r.enableShortcuts)return n;var o={children:e.jsxs(e.Fragment,{children:[e.jsx(d,{containerRef:t.containerRef,store:c}),e.jsx(f,{pagesContainerRef:t.pagesContainerRef,store:c}),n.children]})};return i(i({},n),o)},install:function(e){c.update("zoom",e.zoom)},onViewerStateChange:function(e){return c.update("scale",e.scale),e},zoomTo:function(e){var t=c.get("zoom");t&&t(e)},CurrentScale:function(t){return e.jsx(a,i({},t,{store:c}))},ZoomIn:u,ZoomInButton:function(){return e.jsx(u,{children:function(t){return e.jsx(C,i({},t))}})},ZoomInMenuItem:function(t){return e.jsx(u,{children:function(n){return e.jsx(S,{onClick:function(){n.onClick(),t.onClick()}})}})},ZoomOut:s,ZoomOutButton:function(){return e.jsx(s,{children:function(t){return e.jsx(M,i({},t))}})},ZoomOutMenuItem:function(t){return e.jsx(s,{children:function(n){return e.jsx(Z,{onClick:function(){n.onClick(),t.onClick()}})}})},Zoom:l,ZoomPopover:function(t){return e.jsx(l,{children:function(n){return e.jsx(z,i({levels:null==t?void 0:t.levels},n))}})}}};
