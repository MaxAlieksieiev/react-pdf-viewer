"use strict";var e=require("react/jsx-runtime"),n=require("@react-pdf-viewer/core");function t(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var r=t(require("react")),i=function(){return e.jsxs(n.Icon,{size:16,children:[e.jsx("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),e.jsx("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"})]})},o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var c=function(e){var n=r.useRef(),t=function(){var t=n.current;t&&(t.click(),e.get("triggerOpenFile")&&e.update("triggerOpenFile",!1))},i=function(e){e&&t()};return r.useEffect((function(){return e.subscribe("triggerOpenFile",i),function(){e.unsubscribe("triggerOpenFile",i)}}),[]),{inputRef:n,openFile:t}},u={left:0,top:8},a=function(t){var o=t.enableShortcuts,a=t.store,s=t.onClick,l=r.useContext(n.LocalizationContext).l10n,p=l&&l.open?l.open.openFile:"Open file",f=c(a),d=f.inputRef,v=f.openFile,h=o?n.isMac()?"Meta+O":"Ctrl+O":"";return e.jsx(n.Tooltip,{ariaControlsSuffix:"open",position:n.Position.BottomCenter,target:e.jsxs("div",{className:"rpv-open__input-wrapper",children:[e.jsx("input",{accept:".pdf",ref:d,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:s}),e.jsx(n.MinimalButton,{ariaKeyShortcuts:h,ariaLabel:p,testId:"open__button",onClick:v,children:e.jsx(i,{})})]}),content:function(){return p},offset:u})},s=function(n){var t=n.children,r=n.enableShortcuts,i=n.store;return(t||function(n){return e.jsx(a,{enableShortcuts:r,store:i,onClick:n.onClick})})({onClick:function(e){var n=e.target.files;if(n&&n.length){var t=i.get("openFile");t&&t(n[0])}}})},l=function(t){var o=t.store,u=t.onClick,a=r.useContext(n.LocalizationContext).l10n,s=a&&a.open?a.open.openFile:"Open file",l=c(o),p=l.inputRef,f=l.openFile;return e.jsx(n.MenuItem,{icon:e.jsx(i,{}),testId:"open__menu",onClick:f,children:e.jsxs("div",{className:"rpv-open__input-wrapper",children:[e.jsx("input",{accept:".pdf",ref:p,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:u}),s]})})},p=function(t){var i=t.containerRef,o=t.store,c=function(e){if(!e.shiftKey&&!e.altKey&&"o"===e.key&&(n.isMac()?e.metaKey:e.ctrlKey)){var t=i.current;t&&document.activeElement&&t.contains(document.activeElement)&&(e.preventDefault(),o.update("triggerOpenFile",!0))}};return r.useEffect((function(){if(i.current)return document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}}),[i.current]),e.jsx(e.Fragment,{})};exports.OpenFileIcon=i,exports.openPlugin=function(t){var i=r.useMemo((function(){return Object.assign({},{enableShortcuts:!0},t)}),[]),c=r.useMemo((function(){return n.createStore({})}),[]),u=function(n){return e.jsx(s,o({enableShortcuts:i.enableShortcuts},n,{store:c}))};return{install:function(e){c.update("openFile",e.openFile)},renderViewer:function(n){var t=n.slot,r={children:e.jsxs(e.Fragment,{children:[i.enableShortcuts&&e.jsx(p,{containerRef:n.containerRef,store:c}),t.children]})};return o(o({},t),r)},Open:u,OpenButton:function(){return e.jsx(u,{})},OpenMenuItem:function(){return e.jsx(u,{children:function(n){return e.jsx(l,{store:c,onClick:n.onClick})}})}}};
