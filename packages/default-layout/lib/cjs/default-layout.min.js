"use strict";var e=require("react/jsx-runtime"),t=require("@react-pdf-viewer/core"),n=require("@react-pdf-viewer/attachment"),a=require("@react-pdf-viewer/bookmark"),r=require("@react-pdf-viewer/thumbnail"),o=require("@react-pdf-viewer/toolbar");function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u=i(require("react")),c=function(){return e.jsx(t.Icon,{size:16,children:e.jsx("path",{d:"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\n            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\n            c0.552,0,1,0.448,1,1L11.5,10.5z\n            M14.5,6.499h6\n            M14.5,10.499h6\n            M3.5,14.499h17\n            M3.5,18.499h16.497"})})},s=function(){return e.jsx(t.Icon,{size:16,children:e.jsx("path",{d:"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\n            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\n            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9"})})},l=function(){return e.jsx(t.Icon,{size:16,children:e.jsx("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"})})},d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var f={left:8,top:0},b={left:-8,top:0},h=function(n){var a=n.attachmentTabContent,r=n.bookmarkTabContent,o=n.store,i=n.thumbnailTabContent,d=n.tabs,h=u.useRef(),p=u.useContext(t.LocalizationContext).l10n,m=u.useState(o.get("isCurrentTabOpened")||!1),v=m[0],y=m[1],x=u.useState(Math.max(o.get("currentTab")||0,0)),g=x[0],T=x[1],_=u.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,j=[{content:i,icon:e.jsx(l,{}),title:p&&p.defaultLayout?p.defaultLayout.thumbnail:"Thumbnail"},{content:r,icon:e.jsx(c,{}),title:p&&p.defaultLayout?p.defaultLayout.bookmark:"Bookmark"},{content:a,icon:e.jsx(s,{}),title:p&&p.defaultLayout?p.defaultLayout.attachment:"Attachment"}],L=d?d(j):j,C=function(e){e>=0&&e<=L.length-1&&(o.update("isCurrentTabOpened",!0),T(e))},P=function(e){y(e)};return u.useEffect((function(){return o.subscribe("currentTab",C),o.subscribe("isCurrentTabOpened",P),function(){o.unsubscribe("currentTab",C),o.unsubscribe("isCurrentTabOpened",P)}}),[]),0===L.length?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-testid":"default-layout__sidebar",className:t.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":v,"rpv-default-layout__sidebar--ltr":!_,"rpv-default-layout__sidebar--rtl":_}),ref:h,children:e.jsxs("div",{className:"rpv-default-layout__sidebar-tabs",children:[e.jsx("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical",children:L.map((function(n,a){return e.jsx("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":g===a,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(a),role:"tab",children:e.jsx(t.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(a),position:_?t.Position.LeftCenter:t.Position.RightCenter,target:e.jsx(t.MinimalButton,{ariaLabel:n.title,isSelected:g===a,onClick:function(){return function(e){if(g===e){o.update("isCurrentTabOpened",!o.get("isCurrentTabOpened"));var t=h.current;t&&t.style.width&&t.style.removeProperty("width")}else o.update("currentTab",e)}(a)},children:n.icon}),content:function(){return n.title},offset:_?b:f})},a)}))}),e.jsx("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(g),id:"rpv-default-layout__sidebar-content",className:t.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":v,"rpv-default-layout__sidebar-content--ltr":!_,"rpv-default-layout__sidebar-content--rtl":_}),role:"tabpanel",tabIndex:-1,children:L[g].content})]})}),v&&e.jsx(t.Splitter,{constrain:function(e){return e.firstHalfPercentage>=20&&e.firstHalfPercentage<=80}})]})};exports.BookmarkIcon=c,exports.FileIcon=s,exports.ThumbnailIcon=l,exports.defaultLayoutPlugin=function(i){var c=u.useMemo((function(){return t.createStore({isCurrentTabOpened:!1,currentTab:0})}),[]),s=n.attachmentPlugin(),l=a.bookmarkPlugin(),f=r.thumbnailPlugin(i?i.thumbnailPlugin:{}),b=o.toolbarPlugin(i?i.toolbarPlugin:{}),p=s.Attachments,m=l.Bookmarks,v=f.Thumbnails,y=b.Toolbar,x=i?i.sidebarTabs:function(e){return e},g=[s,l,f,b];return{attachmentPluginInstance:s,bookmarkPluginInstance:l,thumbnailPluginInstance:f,toolbarPluginInstance:b,activateTab:function(e){c.update("currentTab",e)},toggleTab:function(e){var t=c.get("currentTab");c.update("isCurrentTabOpened",!c.get("isCurrentTabOpened")),t!==e&&c.update("currentTab",e)},install:function(e){g.forEach((function(t){t.install&&t.install(e)}))},renderPageLayer:function(t){return e.jsx(u.Fragment,{children:g.map((function(n,a){return n.renderPageLayer?e.jsx(u.Fragment,{children:n.renderPageLayer(t)},a):e.jsx(u.Fragment,{children:e.jsx(e.Fragment,{})},a)}))})},renderViewer:function(n){var a=n.slot;g.forEach((function(e){e.renderViewer&&(a=e.renderViewer(d(d({},n),{slot:a})))}));var r=a.subSlot&&a.subSlot.attrs?{className:a.subSlot.attrs.className,"data-testid":a.subSlot.attrs["data-testid"],ref:a.subSlot.attrs.ref,style:a.subSlot.attrs.style}:{};return a.children=e.jsxs("div",{className:"rpv-default-layout__container",children:[e.jsxs("div",{"data-testid":"default-layout__main",className:t.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":n.themeContext.direction===t.TextDirection.RightToLeft}),children:[e.jsx(h,{attachmentTabContent:e.jsx(p,{}),bookmarkTabContent:e.jsx(m,{}),store:c,thumbnailTabContent:e.jsx(v,{}),tabs:x}),e.jsxs("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body",children:[e.jsx("div",{className:"rpv-default-layout__toolbar",children:i&&i.renderToolbar?i.renderToolbar(y):e.jsx(y,{})}),e.jsx("div",d({},r,{children:a.subSlot.children}))]})]}),a.children]}),a.subSlot.attrs={},a.subSlot.children=e.jsx(e.Fragment,{}),a},uninstall:function(e){g.forEach((function(t){t.uninstall&&t.uninstall(e)}))},onDocumentLoad:function(e){g.forEach((function(t){t.onDocumentLoad&&t.onDocumentLoad(e)})),i&&i.setInitialTab&&i.setInitialTab(e.doc).then((function(e){c.update("currentTab",e),c.update("isCurrentTabOpened",!0)}))},onAnnotationLayerRender:function(e){g.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender(e)}))},onTextLayerRender:function(e){g.forEach((function(t){t.onTextLayerRender&&t.onTextLayerRender(e)}))},onViewerStateChange:function(e){var t=e;return g.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),t}}},exports.setInitialTabFromPageMode=function(e){return new Promise((function(n,a){e.getPageMode().then((function(e){if(e)switch(e){case t.PageMode.Attachments:n(2);break;case t.PageMode.Bookmarks:n(1);break;case t.PageMode.Thumbnails:n(0);break;default:n(-1)}else n(-1)}))}))};
